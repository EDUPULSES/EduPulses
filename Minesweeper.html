<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neural Minesweeper: Logic Test</title>
    <style>
        :root {
            --bg: #0f172a;
            --panel-bg: #1e293b;
            --accent: #f59e0b; /* Amber for mines */
            --safe: #10b981;   /* Green for safety */
            --text: #f8fafc;
            --cell: #334155;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); color: var(--text); 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0;
        }

        .home-link {
            position: absolute; top: 20px; left: 20px;
            text-decoration: none; color: var(--text); background: rgba(255,255,255,0.1);
            padding: 10px 20px; border-radius: 12px; border: 1px solid var(--accent);
            font-weight: bold; transition: 0.3s;
        }

        .game-wrapper { display: flex; gap: 40px; align-items: flex-start; }

        /* Board Styling */
        #board {
            display: grid; background: #1e293b; padding: 10px;
            border-radius: 10px; border: 4px solid #334155;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .cell {
            width: 30px; height: 30px; background: var(--cell);
            border: 1px solid #1e293b; display: flex;
            justify-content: center; align-items: center;
            font-weight: bold; cursor: pointer; user-select: none;
            border-radius: 2px;
        }

        .cell.revealed { background: #cbd5e1; color: #0f172a; cursor: default; }
        .cell.mine { background: #ef4444 !important; }
        .cell.flagged { background: #f59e0b !important; }

        /* Sidebar Stats */
        .sidebar {
            width: 200px; background: rgba(30, 41, 59, 0.7); padding: 25px;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .stat-label { font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; }
        .stat-value { font-size: 1.8rem; font-weight: 800; color: var(--accent); margin-bottom: 15px; }

        select, button {
            width: 100%; padding: 12px; border: none; border-radius: 8px;
            margin-bottom: 10px; font-weight: bold; cursor: pointer;
        }
        select { background: #0f172a; color: white; border: 1px solid var(--accent); }
        button { background: var(--accent); color: #0f172a; }

        /* Number Colors */
        .n1 { color: blue; } .n2 { color: green; } .n3 { color: red; } .n4 { color: darkblue; }
    </style>
</head>
<body>

    <a href="index.html" class="home-link">üè† EXIT TO HOME</a>

    <div class="game-wrapper">
        <div id="board"></div>

        <div class="sidebar">
            <div class="stat-label">Mines Left</div>
            <div id="mineCount" class="stat-value">10</div>

            <div class="stat-label">Difficulty</div>
            <select id="levelSelect" onchange="initGame()">
                <option value="easy">Easy (10 Mines)</option>
                <option value="medium">Medium (40 Mines)</option>
                <option value="hard">Hard (99 Mines)</option>
            </select>

            <button onclick="initGame()">RESET BOARD</button>
            <p style="font-size: 0.7rem; color: #94a3b8;">
                <b>Left Click:</b> Reveal<br>
                <b>Right Click:</b> Flag üö©
            </p>
        </div>
    </div>

    <script>
        let board = [], rCount, cCount, mCount, mines = [], gameOver = false;
        const boardElem = document.getElementById('board');

        function initGame() {
            const level = document.getElementById('levelSelect').value;
            if(level === 'easy') { rCount = 10; cCount = 10; mCount = 10; }
            else if(level === 'medium') { rCount = 16; cCount = 16; mCount = 40; }
            else { rCount = 16; cCount = 30; mCount = 99; }

            gameOver = false;
            document.getElementById('mineCount').innerText = mCount;
            boardElem.style.gridTemplateColumns = `repeat(${cCount}, 30px)`;
            createBoard();
        }

        function createBoard() {
            boardElem.innerHTML = '';
            board = []; mines = [];
            for (let r = 0; r < rCount; r++) {
                let row = [];
                for (let c = 0; c < cCount; c++) {
                    let cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.addEventListener('click', () => reveal(r, c));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        toggleFlag(r, c);
                    });
                    boardElem.appendChild(cell);
                    row.push({ r, c, isMine: false, revealed: false, flagged: false, neighborCount: 0, elem: cell });
                }
                board.push(row);
            }
            plantMines();
        }

        function plantMines() {
            let planted = 0;
            while (planted < mCount) {
                let r = Math.floor(Math.random() * rCount);
                let c = Math.floor(Math.random() * cCount);
                if (!board[r][c].isMine) {
                    board[r][c].isMine = true;
                    mines.push(board[r][c]);
                    planted++;
                }
            }
            calculateNeighbors();
        }

        function calculateNeighbors() {
            for (let r = 0; r < rCount; r++) {
                for (let c = 0; c < cCount; c++) {
                    if (board[r][c].isMine) continue;
                    let count = 0;
                    for (let dr = -1; dr <= 1; dr++) {
                        for (let dc = -1; dc <= 1; dc++) {
                            let nr = r + dr, nc = c + dc;
                            if (nr >= 0 && nr < rCount && nc >= 0 && nc < cCount && board[nr][nc].isMine) count++;
                        }
                    }
                    board[r][c].neighborCount = count;
                }
            }
        }

        function reveal(r, c) {
            if (gameOver || board[r][c].revealed || board[r][c].flagged) return;
            board[r][c].revealed = true;
            let cell = board[r][c];
            cell.elem.classList.add('revealed');

            if (cell.isMine) {
                endGame(false);
                return;
            }

            if (cell.neighborCount > 0) {
                cell.elem.innerText = cell.neighborCount;
                cell.elem.classList.add('n' + cell.neighborCount);
            } else {
                for (let dr = -1; dr <= 1; dr++) {
                    for (let dc = -1; dc <= 1; dc++) {
                        let nr = r + dr, nc = c + dc;
                        if (nr >= 0 && nr < rCount && nc >= 0 && nc < cCount) reveal(nr, nc);
                    }
                }
            }
            checkWin();
        }

        function toggleFlag(r, c) {
            if (gameOver || board[r][c].revealed) return;
            board[r][c].flagged = !board[r][c].flagged;
            board[r][c].elem.classList.toggle('flagged');
            board[r][c].elem.innerText = board[r][c].flagged ? 'üö©' : '';
        }

        function endGame(won) {
            gameOver = true;
            mines.forEach(m => {
                m.elem.classList.add('mine');
                m.elem.innerText = 'üí£';
            });
            alert(won ? "üéâ MISSION SUCCESS: Grid Cleared!" : "üí• BOOM! Brain Overload.");
        }

        function checkWin() {
            let unrevealed = 0;
            board.forEach(row => row.forEach(c => { if(!c.revealed && !c.isMine) unrevealed++; }));
            if (unrevealed === 0) endGame(true);
        }

        initGame();
    </script>
</body>
</html>